<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/test">
  <signal id="importaconsegneerititirieseguito" name="importaconsegneerititirieseguito"></signal>
  <process id="costruisciMissioni" name="Costruisci Missioni" isExecutable="true">
    <startEvent id="timerCostruisciMissioni" name="Timer Costruisci Missioni">
      <documentation>contiene:
&lt;UC3_2.6.1.1&gt;: &lt;Costruisci missioni&gt;</documentation>
      <timerEventDefinition>
        <timeDate>T07:30:00</timeDate>
      </timerEventDefinition>
    </startEvent>
    <endEvent id="endCostruisciMissioni" name="End Costruisci Missioni"></endEvent>
    <sequenceFlow id="flowRecuperoPolicy" sourceRef="timerCostruisciMissioni" targetRef="importaConsegneERitiriEseguito"></sequenceFlow>
    <serviceTask id="recuperoDellePolicy" name="Recupero delle Policy" activiti:class="it.vige.greenarea.bpm.tempo.costruiscimissioni.RecuperoDellePolicy"></serviceTask>
    <subProcess id="subprocessCostruzioneMissione" name="Sub Process Costruzione Missione">
      <multiInstanceLoopCharacteristics isSequential="false" activiti:collection="operatorilogistici" activiti:elementVariable="operatorelogistico">
        <completionCondition>${messaggio.categoria == 'ERROREGRAVE'}</completionCondition>
      </multiInstanceLoopCharacteristics>
      <startEvent id="startSubprocessCostruzioneMissione" name="Start Subprocess Costruzione Missione"></startEvent>
      <endEvent id="endSubprocessCostruzioneMissione" name="End Subprocess Costruzione Missione"></endEvent>
      <serviceTask id="recuperoDatiDeiVeicoliEAutisti" name="Recupero dati dei Veicoli e Autisti" activiti:class="it.vige.greenarea.bpm.tempo.costruiscimissioni.RecuperoDatiDeiVeicoliEAutisti"></serviceTask>
      <sequenceFlow id="flowExclusivegatewayRecuperoDatiVeicoliEAutistiPolicy" sourceRef="recuperoDatiDeiVeicoliEAutisti" targetRef="exclusivegatewayRecuperoDatiVeicoliEAutistiPolicy"></sequenceFlow>
      <exclusiveGateway id="exclusivegatewayRecuperoDatiVeicoliEAutistiPolicy" name="Exclusive Gateway Recupero Dati Veicoli e Autisti Policy"></exclusiveGateway>
      <sequenceFlow id="flowNotificaErroreReperimentoDatiAutistiEVeicoliAAmministratore" sourceRef="exclusivegatewayRecuperoDatiVeicoliEAutistiPolicy" targetRef="notificaErroreReperimentoDatiAutistiEVeicoliAAmministratore">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'ERRORESISTEMA'}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow6" sourceRef="exclusivegatewayRecuperoDatiVeicoliEAutistiPolicy" targetRef="notificaDatiAutistiMancantiAAmministratore">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'ERROREDATIMANCANTI'}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow32" sourceRef="startSubprocessCostruzioneMissione" targetRef="recuperoDatiDeiVeicoliEAutisti"></sequenceFlow>
      <sequenceFlow id="flow45" sourceRef="exclusivegatewayRecuperoDatiVeicoliEAutistiPolicy" targetRef="exclusivegateway11">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.categoria == 'OK'}]]></conditionExpression>
      </sequenceFlow>
      <boundaryEvent id="boundaryerror3" name="Error" attachedToRef="recuperoDatiDeiVeicoliEAutisti">
        <errorEventDefinition errorRef="erroregraverecuperoautistiveicoli"></errorEventDefinition>
      </boundaryEvent>
      <sequenceFlow id="flow54" sourceRef="boundaryerror3" targetRef="exclusivegateway11"></sequenceFlow>
      <serviceTask id="notificaDatiAutistiMancantiAAmministratore" name="Notifica Dati Autisti e Veicoli mancanti a Amministratore" activiti:type="mail">
        <extensionElements>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Dati Autisti e Veicoli mancanti]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Dati Autisti e Veicoli mancanti]]></activiti:string>
          </activiti:field>
          <activiti:field name="to">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow9" sourceRef="notificaDatiAutistiMancantiAAmministratore" targetRef="notificaDatiAutistiMancantiAOperatoreLogistico"></sequenceFlow>
      <serviceTask id="notificaDatiAutistiMancantiAOperatoreLogistico" name="Notifica Dati Autisti e Veicoli mancanti a Operatore Logistico" activiti:type="mail">
        <extensionElements>
          <activiti:field name="to">
            <activiti:expression>${operatorelogistico.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Dati Autisti e Veicoli mancanti]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Dati Autisti e Veicoli mancanti]]></activiti:string>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow55" sourceRef="notificaDatiAutistiMancantiAOperatoreLogistico" targetRef="exclusivegateway11"></sequenceFlow>
      <serviceTask id="notificaErroreReperimentoDatiAutistiEVeicoliAAmministratore" name="Notifica Errore Reperimento Dati Autisti e Veicoli a Amministratore" activiti:type="mail">
        <extensionElements>
          <activiti:field name="to">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Errore Reperimento Dati Autisti e Veicoli]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Errore Reperimento Dati Autisti e Veicoli]]></activiti:string>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow5" sourceRef="notificaErroreReperimentoDatiAutistiEVeicoliAAmministratore" targetRef="notificaErroreReperimentoDatiAutistiEVeicoliAOperatoreLogistico"></sequenceFlow>
      <serviceTask id="notificaErroreReperimentoDatiAutistiEVeicoliAOperatoreLogistico" name="Notifica Errore Reperimento Dati Autisti e Veicoli a Operatore Logistico" activiti:type="mail">
        <extensionElements>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Errore Reperimento Dati Autisti e Veicoli]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Errore Reperimento Dati Autisti e Veicoli]]></activiti:string>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="to">
            <activiti:expression>${operatorelogistico.email}</activiti:expression>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow56" sourceRef="notificaErroreReperimentoDatiAutistiEVeicoliAOperatoreLogistico" targetRef="exclusivegateway11"></sequenceFlow>
      <exclusiveGateway id="exclusivegateway11" name="Exclusive Gateway"></exclusiveGateway>
      <sequenceFlow id="flow63" sourceRef="exclusivegateway11" targetRef="endSubprocessCostruzioneMissione"></sequenceFlow>
    </subProcess>
    <exclusiveGateway id="exclusivegatewayRecuperoPolicy" name="Exclusive Gateway Recupero Policy"></exclusiveGateway>
    <sequenceFlow id="flowExclusivegatewayRecuperoPolicy" sourceRef="recuperoDellePolicy" targetRef="exclusivegatewayRecuperoPolicy"></sequenceFlow>
    <sequenceFlow id="flowSollecitoPolicyMancantiAPA" sourceRef="exclusivegatewayRecuperoPolicy" targetRef="errorendevent2">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'ERROREDATIMANCANTI'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flowNotificaErroreReperimentoPolicyAAmministratore" sourceRef="exclusivegatewayRecuperoPolicy" targetRef="errorendevent1">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'ERRORESISTEMA'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flowSubprocessCostruzioneMissione" sourceRef="exclusivegatewayRecuperoPolicy" targetRef="subprocessCostruzioneMissione">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.categoria == 'OK'}]]></conditionExpression>
    </sequenceFlow>
    <intermediateCatchEvent id="importaConsegneERitiriEseguito" name="Importa Consegne e Ritiri eseguito">
      <signalEventDefinition signalRef="importaconsegneerititirieseguito"></signalEventDefinition>
    </intermediateCatchEvent>
    <sequenceFlow id="flow8" sourceRef="importaConsegneERitiriEseguito" targetRef="recuperoDellePolicy">
      <extensionElements>
        <activiti:executionListener event="take" class="it.vige.greenarea.bpm.InitLocalEnvironment"></activiti:executionListener>
        <activiti:executionListener event="take" class="it.vige.greenarea.bpm.GetOperatoriLogistici"></activiti:executionListener>
      </extensionElements>
    </sequenceFlow>
    <subProcess id="subprocessRecuperoConsegneERitiri" name="Sub Process Recupero Consegne e Ritiri">
      <multiInstanceLoopCharacteristics isSequential="false" activiti:collection="operatorilogistici" activiti:elementVariable="operatorelogistico">
        <completionCondition>${messaggio.categoria == 'ERROREGRAVE'}</completionCondition>
      </multiInstanceLoopCharacteristics>
      <serviceTask id="recuperoDelleConsegneEDeiRitiri" name="Recupero delle Consegne e dei Ritiri" activiti:delegateExpression="${recuperoDelleConsegneEDeiRitiri}"></serviceTask>
      <startEvent id="startSubprocessRecuperoConsegneERitiri" name="Start Subprocess Recupero Consegne e Ritiri"></startEvent>
      <endEvent id="endSubprocessRecuperoConsegneERitiri" name="End Subprocess Recupero Consegne e Ritiri"></endEvent>
      <sequenceFlow id="flowExclusivegatewayRecuperoConsegneERitiri" sourceRef="recuperoDelleConsegneEDeiRitiri" targetRef="exclusivegatewayRecuperoConsegneERitiri"></sequenceFlow>
      <sequenceFlow id="flowendSubprocessRecuperoInformazioniDelVeicolo" sourceRef="notificaAvvenutaCostruzioneMissioniAOperatoreLogistico" targetRef="exclusivegateway8"></sequenceFlow>
      <exclusiveGateway id="exclusivegatewayRecuperoConsegneERitiri" name="Exclusive Gateway Recupero Consegne e Ritiri"></exclusiveGateway>
      <sequenceFlow id="flowSubprocessRecuperoInformazioniDelVeicolo" sourceRef="exclusivegatewayRecuperoConsegneERitiri" targetRef="subprocessAggiornamentoMissione">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'NESSUNERRORE'}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flowNotificaErroreReperimentoConsegneERitiriAAmministratore" sourceRef="exclusivegatewayRecuperoConsegneERitiri" targetRef="notificaErroreReperimentoConsegneERitiriAAmministratore">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'ERRORESISTEMA'}]]></conditionExpression>
      </sequenceFlow>
      <serviceTask id="notificaAvvenutaCostruzioneMissioniAOperatoreLogistico" name="Notifica Avvenuta Costruzione Missioni a Operatore Logistico" activiti:type="mail">
        <extensionElements>
          <activiti:field name="to">
            <activiti:expression>${operatorelogistico.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Avvenuta Costruzione delle Missioni]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Avvenuta Costruzione delle Missioni]]></activiti:string>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow1" sourceRef="exclusivegateway4" targetRef="exclusivegateway5">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.categoria != 'ERROREGRAVE'}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow13" sourceRef="exclusivegatewayRecuperoConsegneERitiri" targetRef="exclusivegateway8">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'ERROREDATIMANCANTI'}]]></conditionExpression>
      </sequenceFlow>
      <exclusiveGateway id="exclusivegateway4" name="Exclusive Gateway"></exclusiveGateway>
      <sequenceFlow id="flow22" sourceRef="subprocessAggiornamentoMissione" targetRef="exclusivegateway4"></sequenceFlow>
      <sequenceFlow id="flow23" sourceRef="exclusivegateway4" targetRef="exclusivegateway8">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.categoria == 'ERROREGRAVE'}]]></conditionExpression>
      </sequenceFlow>
      <exclusiveGateway id="exclusivegateway5" name="Exclusive Gateway"></exclusiveGateway>
      <sequenceFlow id="flow24" sourceRef="exclusivegateway5" targetRef="notificaAvvenutaCostruzioneMissioniAOperatoreLogistico">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${richieste.size() <= veicoli.size()}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow25" sourceRef="notificaVeicoliInsufficientiPerTutteLeConsegne" targetRef="notificaAvvenutaCostruzioneMissioniAOperatoreLogistico"></sequenceFlow>
      <serviceTask id="notificaVeicoliInsufficientiPerTutteLeConsegne" name="Notifica Veicoli insufficienti per tutte le Consegne" activiti:type="mail">
        <extensionElements>
          <activiti:field name="to">
            <activiti:expression>${operatorelogistico.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Veicoli insufficienti per tutte le Consegne]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Veicoli insufficienti per tutte le Consegne]]></activiti:string>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow26" sourceRef="exclusivegateway5" targetRef="notificaVeicoliInsufficientiPerTutteLeConsegne">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${richieste.size() > veicoli.size()}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow33" sourceRef="startSubprocessRecuperoConsegneERitiri" targetRef="recuperoDelleConsegneEDeiRitiri"></sequenceFlow>
      <boundaryEvent id="boundaryerror2" name="Error" attachedToRef="recuperoDelleConsegneEDeiRitiri">
        <errorEventDefinition errorRef="erroregraverecuperoconsegneritiri"></errorEventDefinition>
      </boundaryEvent>
      <sequenceFlow id="flow53" sourceRef="boundaryerror2" targetRef="exclusivegateway8"></sequenceFlow>
      <serviceTask id="notificaErroreReperimentoConsegneERitiriAAmministratore" name="Notifica Errore Reperimento Consegne e Ritiri a Amministratore" activiti:type="mail">
        <extensionElements>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Errore Reperimento Consegne e Ritiri]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Errore Reperimento Consegne e Ritiri]]></activiti:string>
          </activiti:field>
          <activiti:field name="to">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flowendNotificaErroreReperimentoConsegneERitiriAAmministratore" sourceRef="notificaErroreReperimentoConsegneERitiriAAmministratore" targetRef="notificaErroreReperimentoConsegneERitiriAOperatoreLogistico"></sequenceFlow>
      <serviceTask id="notificaErroreReperimentoConsegneERitiriAOperatoreLogistico" name="Notifica Errore Reperimento Consegne e Ritiri a Operatore Logistico" activiti:type="mail">
        <extensionElements>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Errore Reperimento Consegne e Ritiri]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Errore Reperimento Consegne e Ritiri]]></activiti:string>
          </activiti:field>
          <activiti:field name="to">
            <activiti:expression>${operatorelogistico.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow58" sourceRef="notificaErroreReperimentoConsegneERitiriAOperatoreLogistico" targetRef="exclusivegateway8"></sequenceFlow>
      <exclusiveGateway id="exclusivegateway8" name="Exclusive Gateway"></exclusiveGateway>
      <sequenceFlow id="flow60" sourceRef="exclusivegateway8" targetRef="endSubprocessRecuperoConsegneERitiri"></sequenceFlow>
      <subProcess id="subprocessAggiornamentoMissione" name="Sub Process Aggiornamento Missione">
        <multiInstanceLoopCharacteristics isSequential="false" activiti:collection="veicoli" activiti:elementVariable="veicolo">
          <completionCondition>${messaggio.categoria == 'ERROREGRAVE'}</completionCondition>
        </multiInstanceLoopCharacteristics>
        <serviceTask id="aggiornamentoDellaMissione" name="Aggiornamento della Missione" activiti:class="it.vige.greenarea.bpm.tempo.costruiscimissioni.AggiornamentoDellaMissione"></serviceTask>
        <startEvent id="startSubprocessAggiornamentoMissione" name="Start Subprocess Aggiornamento Missione"></startEvent>
        <endEvent id="endSubprocessAggiornamentoMissione" name="End Subprocess Aggiornamento Missione"></endEvent>
        <sequenceFlow id="flowExclusivegatewayAggiornamentoMissione" sourceRef="aggiornamentoDellaMissione" targetRef="exclusivegatewayAggiornamentoMissione"></sequenceFlow>
        <exclusiveGateway id="exclusivegatewayAggiornamentoMissione" name="Exclusive Gateway Aggiornamento Missione"></exclusiveGateway>
        <sequenceFlow id="flowNotificaErroreAggiornamentoMissioneAAmministratore" sourceRef="exclusivegatewayAggiornamentoMissione" targetRef="notificaErroreAggiornamentoMissioneAAmministratore">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'ERRORESISTEMA'}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flowendExclusivegatewayAggiornamentoMissione" sourceRef="exclusivegatewayAggiornamentoMissione" targetRef="exclusivegateway10">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'NESSUNERRORE'}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flowSubprocessCostruzioneMissionePerVeicolo" sourceRef="startSubprocessAggiornamentoMissione" targetRef="costruzioneMissionePerIlVeicolo"></sequenceFlow>
        <serviceTask id="costruzioneMissionePerIlVeicolo" name="Costruzione Missione per il Veicolo" activiti:class="it.vige.greenarea.bpm.tempo.costruiscimissioni.CostruzioneMissionePerIlVeicolo"></serviceTask>
        <exclusiveGateway id="exclusivegatewayCostruzioneMissionePerVeicolo" name="Exclusive Gateway Costruzione Missione per Veicolo"></exclusiveGateway>
        <serviceTask id="notificaErroreInserimentoConsegnaPerLaMissioneAOperatoreLogistico" name="Notifica Errore Inserimento Consegna per la Missione a Operatore Logistico" activiti:type="mail">
          <extensionElements>
            <activiti:field name="subject">
              <activiti:string><![CDATA[Notifica Errore Inserimento Consegna per la Missione]]></activiti:string>
            </activiti:field>
            <activiti:field name="html">
              <activiti:string><![CDATA[Notifica Errore Inserimento Consegna per la Missione]]></activiti:string>
            </activiti:field>
            <activiti:field name="to">
              <activiti:expression>${operatorelogistico.email}</activiti:expression>
            </activiti:field>
            <activiti:field name="from">
              <activiti:expression>${amministratore.email}</activiti:expression>
            </activiti:field>
          </extensionElements>
        </serviceTask>
        <sequenceFlow id="flow35" sourceRef="costruzioneMissionePerIlVeicolo" targetRef="exclusivegatewayCostruzioneMissionePerVeicolo"></sequenceFlow>
        <sequenceFlow id="flow36" sourceRef="exclusivegatewayCostruzioneMissionePerVeicolo" targetRef="notificaErroreInserimentoConsegnaPerLaMissioneAOperatoreLogistico">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'ERRORESISTEMA'}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow37" sourceRef="notificaErroreInserimentoConsegnaPerLaMissioneAOperatoreLogistico" targetRef="exclusivegateway10"></sequenceFlow>
        <sequenceFlow id="flow38" sourceRef="exclusivegatewayCostruzioneMissionePerVeicolo" targetRef="aggiornamentoDellaMissione">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.tipo == 'NESSUNERRORE'}]]></conditionExpression>
        </sequenceFlow>
        <serviceTask id="notificaErroreAggiornamentoMissioneAAmministratore" name="Notifica Errore Aggiornamento Missione a Amministratore" activiti:type="mail">
          <extensionElements>
            <activiti:field name="subject">
              <activiti:string><![CDATA[Notifica Errore Aggiornamento Missione]]></activiti:string>
            </activiti:field>
            <activiti:field name="html">
              <activiti:string><![CDATA[Notifica Errore Aggiornamento Missione]]></activiti:string>
            </activiti:field>
            <activiti:field name="to">
              <activiti:expression>${amministratore.email}</activiti:expression>
            </activiti:field>
            <activiti:field name="from">
              <activiti:expression>${amministratore.email}</activiti:expression>
            </activiti:field>
          </extensionElements>
        </serviceTask>
        <sequenceFlow id="flow7" sourceRef="notificaErroreAggiornamentoMissioneAAmministratore" targetRef="notificaErroreAggiornamentoMissioneAOperatoreLogistico"></sequenceFlow>
        <serviceTask id="notificaErroreAggiornamentoMissioneAOperatoreLogistico" name="Notifica Errore Aggiornamento Missione a Operatore Logistico" activiti:type="mail">
          <extensionElements>
            <activiti:field name="subject">
              <activiti:string><![CDATA[Notifica Errore Aggiornamento Missione]]></activiti:string>
            </activiti:field>
            <activiti:field name="from">
              <activiti:expression>${amministratore.email}</activiti:expression>
            </activiti:field>
            <activiti:field name="to">
              <activiti:expression>${operatorelogistico.email}</activiti:expression>
            </activiti:field>
            <activiti:field name="html">
              <activiti:string><![CDATA[Notifica Errore Aggiornamento Missione]]></activiti:string>
            </activiti:field>
          </extensionElements>
        </serviceTask>
        <sequenceFlow id="flow57" sourceRef="notificaErroreAggiornamentoMissioneAOperatoreLogistico" targetRef="exclusivegateway10"></sequenceFlow>
        <exclusiveGateway id="exclusivegateway10" name="Exclusive Gateway"></exclusiveGateway>
        <sequenceFlow id="flow62" sourceRef="exclusivegateway10" targetRef="endSubprocessAggiornamentoMissione"></sequenceFlow>
      </subProcess>
    </subProcess>
    <sequenceFlow id="flow15" sourceRef="subprocessCostruzioneMissione" targetRef="exclusivegateway6"></sequenceFlow>
    <sequenceFlow id="flow16" sourceRef="subprocessRecuperoConsegneERitiri" targetRef="exclusivegateway7"></sequenceFlow>
    <exclusiveGateway id="exclusivegateway6" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow27" sourceRef="exclusivegateway6" targetRef="exclusivegateway7">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.categoria == 'ERROREGRAVE'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow28" sourceRef="exclusivegateway6" targetRef="subprocessRecuperoConsegneERitiri">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${messaggio.categoria != 'ERROREGRAVE'}]]></conditionExpression>
    </sequenceFlow>
    <subProcess id="eventsubprocessSollecitoPolicyMancanti" name="Event sub Process Sollecito Policy mancanti" triggeredByEvent="true">
      <startEvent id="errorstarteventSubprocessSollecitoPolicyMancanti" name="Error start Event Subprocess Sollecito Policy Mancanti">
        <errorEventDefinition errorRef="sollecitopolicymancanti"></errorEventDefinition>
      </startEvent>
      <endEvent id="errorendeventSubprocessSollecitoPolicyMancanti" name="Error End Event Subprocess Sollecito Policy Mancanti"></endEvent>
      <serviceTask id="sollecitoPolicyMancantiAOperatoriLogistici" name="Sollecito Policy Mancanti a Operatori Logistici" activiti:type="mail">
        <extensionElements>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Sollecito Policy mancanti]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Sollecito Policy mancanti]]></activiti:string>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="to">
            <activiti:expression>${operatorelogistico.email}</activiti:expression>
          </activiti:field>
        </extensionElements>
        <multiInstanceLoopCharacteristics isSequential="false" activiti:collection="operatorilogistici" activiti:elementVariable="operatorelogistico"></multiInstanceLoopCharacteristics>
      </serviceTask>
      <serviceTask id="sollecitoPolicyMancantiAPA" name="Sollecito Policy Mancanti a PA" activiti:type="mail">
        <extensionElements>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Sollecito Policy mancanti]]></activiti:string>
          </activiti:field>
          <activiti:field name="to">
            <activiti:expression>${pa.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Sollecito Policy mancanti]]></activiti:string>
          </activiti:field>
        </extensionElements>
        <multiInstanceLoopCharacteristics isSequential="false" activiti:collection="pubblicheamministrazioni" activiti:elementVariable="pa"></multiInstanceLoopCharacteristics>
      </serviceTask>
      <sequenceFlow id="flow3" sourceRef="sollecitoPolicyMancantiAPA" targetRef="sollecitoPolicyMancantiAOperatoriLogistici"></sequenceFlow>
      <sequenceFlow id="flow41" sourceRef="errorstarteventSubprocessSollecitoPolicyMancanti" targetRef="sollecitoPolicyMancantiAPA"></sequenceFlow>
      <sequenceFlow id="flow42" sourceRef="sollecitoPolicyMancantiAOperatoriLogistici" targetRef="errorendeventSubprocessSollecitoPolicyMancanti"></sequenceFlow>
    </subProcess>
    <subProcess id="eventsubprocessErroreReperimentoPolicy" name="Event sub Process Errore Reperimento Policy" triggeredByEvent="true">
      <startEvent id="errorstarteventSubprocessErroreReperimentoPolicy" name="Error start Event Subprocess Errore Reperimento Policy">
        <errorEventDefinition errorRef="errorereperimentopolicy"></errorEventDefinition>
      </startEvent>
      <endEvent id="errorendeventSubprocessErroreReperimentoPolicy" name="Error End Event Subprocess Errore Reperimento Policy"></endEvent>
      <serviceTask id="notificaErroreReperimentoPolicyAAmministratore" name="Notifica Errore Reperimento Policy a Amministratore" activiti:type="mail">
        <extensionElements>
          <activiti:field name="to">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Errore Reperimento Policy]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Errore Reperimento Policy]]></activiti:string>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow2" sourceRef="notificaErroreReperimentoPolicyAAmministratore" targetRef="notificaErroreReperimentoPolicyAOperatoriLogistici"></sequenceFlow>
      <serviceTask id="notificaErroreReperimentoPolicyAOperatoriLogistici" name="Notifica Errore Reperimento Policy a Operatori Logistici" activiti:type="mail">
        <extensionElements>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Notifica Errore Reperimento Policy]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:string><![CDATA[Notifica Errore Reperimento Policy]]></activiti:string>
          </activiti:field>
          <activiti:field name="from">
            <activiti:expression>${amministratore.email}</activiti:expression>
          </activiti:field>
          <activiti:field name="to">
            <activiti:expression>${operatorelogistico.email}</activiti:expression>
          </activiti:field>
        </extensionElements>
        <multiInstanceLoopCharacteristics isSequential="false" activiti:collection="operatorilogistici" activiti:elementVariable="operatorelogistico"></multiInstanceLoopCharacteristics>
      </serviceTask>
      <sequenceFlow id="flow39" sourceRef="errorstarteventSubprocessErroreReperimentoPolicy" targetRef="notificaErroreReperimentoPolicyAAmministratore"></sequenceFlow>
      <sequenceFlow id="flow40" sourceRef="notificaErroreReperimentoPolicyAOperatoriLogistici" targetRef="errorendeventSubprocessErroreReperimentoPolicy"></sequenceFlow>
    </subProcess>
    <endEvent id="errorendevent1" name="ErrorEnd">
      <errorEventDefinition errorRef="errorereperimentopolicy"></errorEventDefinition>
    </endEvent>
    <endEvent id="errorendevent2" name="ErrorEnd">
      <errorEventDefinition errorRef="sollecitopolicymancanti"></errorEventDefinition>
    </endEvent>
    <exclusiveGateway id="exclusivegateway7" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow59" sourceRef="exclusivegateway7" targetRef="endCostruisciMissioni"></sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_costruisciMissioni">
    <bpmndi:BPMNPlane bpmnElement="costruisciMissioni" id="BPMNPlane_costruisciMissioni">
      <bpmndi:BPMNShape bpmnElement="timerCostruisciMissioni" id="BPMNShape_timerCostruisciMissioni">
        <omgdc:Bounds height="35.0" width="35.0" x="180.0" y="160.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endCostruisciMissioni" id="BPMNShape_endCostruisciMissioni">
        <omgdc:Bounds height="35.0" width="35.0" x="642.0" y="204.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="recuperoDellePolicy" id="BPMNShape_recuperoDellePolicy">
        <omgdc:Bounds height="71.0" width="121.0" x="450.0" y="24.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="subprocessCostruzioneMissione" id="BPMNShape_subprocessCostruzioneMissione">
        <omgdc:Bounds height="411.0" width="751.0" x="0.0" y="371.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="startSubprocessCostruzioneMissione" id="BPMNShape_startSubprocessCostruzioneMissione">
        <omgdc:Bounds height="35.0" width="35.0" x="50.0" y="421.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endSubprocessCostruzioneMissione" id="BPMNShape_endSubprocessCostruzioneMissione">
        <omgdc:Bounds height="35.0" width="35.0" x="670.0" y="421.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="recuperoDatiDeiVeicoliEAutisti" id="BPMNShape_recuperoDatiDeiVeicoliEAutisti">
        <omgdc:Bounds height="81.0" width="131.0" x="150.0" y="471.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="boundaryerror3" id="BPMNShape_boundaryerror3">
        <omgdc:Bounds height="30.0" width="30.0" x="270.0" y="481.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegatewayRecuperoDatiVeicoliEAutistiPolicy" id="BPMNShape_exclusivegatewayRecuperoDatiVeicoliEAutistiPolicy">
        <omgdc:Bounds height="40.0" width="40.0" x="160.0" y="627.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaDatiAutistiMancantiAAmministratore" id="BPMNShape_notificaDatiAutistiMancantiAAmministratore">
        <omgdc:Bounds height="81.0" width="121.0" x="360.0" y="560.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaDatiAutistiMancantiAOperatoreLogistico" id="BPMNShape_notificaDatiAutistiMancantiAOperatoreLogistico">
        <omgdc:Bounds height="81.0" width="131.0" x="512.0" y="540.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaErroreReperimentoDatiAutistiEVeicoliAAmministratore" id="BPMNShape_notificaErroreReperimentoDatiAutistiEVeicoliAAmministratore">
        <omgdc:Bounds height="91.0" width="131.0" x="400.0" y="660.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaErroreReperimentoDatiAutistiEVeicoliAOperatoreLogistico" id="BPMNShape_notificaErroreReperimentoDatiAutistiEVeicoliAOperatoreLogistico">
        <omgdc:Bounds height="90.0" width="135.0" x="590.0" y="640.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway11" id="BPMNShape_exclusivegateway11">
        <omgdc:Bounds height="40.0" width="40.0" x="560.0" y="401.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegatewayRecuperoPolicy" id="BPMNShape_exclusivegatewayRecuperoPolicy">
        <omgdc:Bounds height="40.0" width="40.0" x="350.0" y="210.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="importaConsegneERitiriEseguito" id="BPMNShape_importaConsegneERitiriEseguito">
        <omgdc:Bounds height="35.0" width="35.0" x="300.0" y="100.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="subprocessRecuperoConsegneERitiri" id="BPMNShape_subprocessRecuperoConsegneERitiri">
        <omgdc:Bounds height="839.0" width="1277.0" x="900.0" y="22.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="recuperoDelleConsegneEDeiRitiri" id="BPMNShape_recuperoDelleConsegneEDeiRitiri">
        <omgdc:Bounds height="81.0" width="131.0" x="910.0" y="72.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="boundaryerror2" id="BPMNShape_boundaryerror2">
        <omgdc:Bounds height="30.0" width="30.0" x="1020.0" y="70.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="startSubprocessRecuperoConsegneERitiri" id="BPMNShape_startSubprocessRecuperoConsegneERitiri">
        <omgdc:Bounds height="35.0" width="35.0" x="1102.0" y="152.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endSubprocessRecuperoConsegneERitiri" id="BPMNShape_endSubprocessRecuperoConsegneERitiri">
        <omgdc:Bounds height="35.0" width="35.0" x="1350.0" y="180.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegatewayRecuperoConsegneERitiri" id="BPMNShape_exclusivegatewayRecuperoConsegneERitiri">
        <omgdc:Bounds height="40.0" width="40.0" x="1200.0" y="380.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaAvvenutaCostruzioneMissioniAOperatoreLogistico" id="BPMNShape_notificaAvvenutaCostruzioneMissioniAOperatoreLogistico">
        <omgdc:Bounds height="85.0" width="131.0" x="1690.0" y="38.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway4" id="BPMNShape_exclusivegateway4">
        <omgdc:Bounds height="40.0" width="40.0" x="1460.0" y="188.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway5" id="BPMNShape_exclusivegateway5">
        <omgdc:Bounds height="40.0" width="40.0" x="1630.0" y="220.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaVeicoliInsufficientiPerTutteLeConsegne" id="BPMNShape_notificaVeicoliInsufficientiPerTutteLeConsegne">
        <omgdc:Bounds height="77.0" width="121.0" x="1790.0" y="202.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaErroreReperimentoConsegneERitiriAAmministratore" id="BPMNShape_notificaErroreReperimentoConsegneERitiriAAmministratore">
        <omgdc:Bounds height="91.0" width="141.0" x="987.0" y="420.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaErroreReperimentoConsegneERitiriAOperatoreLogistico" id="BPMNShape_notificaErroreReperimentoConsegneERitiriAOperatoreLogistico">
        <omgdc:Bounds height="77.0" width="135.0" x="1040.0" y="228.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway8" id="BPMNShape_exclusivegateway8">
        <omgdc:Bounds height="40.0" width="40.0" x="1310.0" y="72.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="subprocessAggiornamentoMissione" id="BPMNShape_subprocessAggiornamentoMissione">
        <omgdc:Bounds height="489.0" width="739.0" x="1360.0" y="323.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="aggiornamentoDellaMissione" id="BPMNShape_aggiornamentoDellaMissione">
        <omgdc:Bounds height="81.0" width="121.0" x="1438.0" y="378.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="startSubprocessAggiornamentoMissione" id="BPMNShape_startSubprocessAggiornamentoMissione">
        <omgdc:Bounds height="35.0" width="35.0" x="1420.0" y="653.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endSubprocessAggiornamentoMissione" id="BPMNShape_endSubprocessAggiornamentoMissione">
        <omgdc:Bounds height="35.0" width="35.0" x="1748.0" y="515.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegatewayAggiornamentoMissione" id="BPMNShape_exclusivegatewayAggiornamentoMissione">
        <omgdc:Bounds height="40.0" width="40.0" x="1698.0" y="361.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="costruzioneMissionePerIlVeicolo" id="BPMNShape_costruzioneMissionePerIlVeicolo">
        <omgdc:Bounds height="81.0" width="131.0" x="1528.0" y="511.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegatewayCostruzioneMissionePerVeicolo" id="BPMNShape_exclusivegatewayCostruzioneMissionePerVeicolo">
        <omgdc:Bounds height="40.0" width="40.0" x="1518.0" y="731.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaErroreInserimentoConsegnaPerLaMissioneAOperatoreLogistico" id="BPMNShape_notificaErroreInserimentoConsegnaPerLaMissioneAOperatoreLogistico">
        <omgdc:Bounds height="81.0" width="135.0" x="1678.0" y="621.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaErroreAggiornamentoMissioneAAmministratore" id="BPMNShape_notificaErroreAggiornamentoMissioneAAmministratore">
        <omgdc:Bounds height="91.0" width="138.0" x="1838.0" y="373.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaErroreAggiornamentoMissioneAOperatoreLogistico" id="BPMNShape_notificaErroreAggiornamentoMissioneAOperatoreLogistico">
        <omgdc:Bounds height="81.0" width="137.0" x="1918.0" y="511.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway10" id="BPMNShape_exclusivegateway10">
        <omgdc:Bounds height="40.0" width="40.0" x="1840.0" y="503.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway6" id="BPMNShape_exclusivegateway6">
        <omgdc:Bounds height="40.0" width="40.0" x="779.0" y="366.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="eventsubprocessSollecitoPolicyMancanti" id="BPMNShape_eventsubprocessSollecitoPolicyMancanti">
        <omgdc:Bounds height="511.0" width="205.0" x="243.0" y="830.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="errorstarteventSubprocessSollecitoPolicyMancanti" id="BPMNShape_errorstarteventSubprocessSollecitoPolicyMancanti">
        <omgdc:Bounds height="35.0" width="35.0" x="353.0" y="870.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="errorendeventSubprocessSollecitoPolicyMancanti" id="BPMNShape_errorendeventSubprocessSollecitoPolicyMancanti">
        <omgdc:Bounds height="35.0" width="35.0" x="368.0" y="1240.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sollecitoPolicyMancantiAOperatoriLogistici" id="BPMNShape_sollecitoPolicyMancantiAOperatoriLogistici">
        <omgdc:Bounds height="81.0" width="131.0" x="257.0" y="1120.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sollecitoPolicyMancantiAPA" id="BPMNShape_sollecitoPolicyMancantiAPA">
        <omgdc:Bounds height="91.0" width="141.0" x="262.0" y="940.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="eventsubprocessErroreReperimentoPolicy" id="BPMNShape_eventsubprocessErroreReperimentoPolicy">
        <omgdc:Bounds height="511.0" width="205.0" x="8.0" y="830.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="errorstarteventSubprocessErroreReperimentoPolicy" id="BPMNShape_errorstarteventSubprocessErroreReperimentoPolicy">
        <omgdc:Bounds height="35.0" width="35.0" x="60.0" y="870.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="errorendeventSubprocessErroreReperimentoPolicy" id="BPMNShape_errorendeventSubprocessErroreReperimentoPolicy">
        <omgdc:Bounds height="35.0" width="35.0" x="147.0" y="1280.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaErroreReperimentoPolicyAAmministratore" id="BPMNShape_notificaErroreReperimentoPolicyAAmministratore">
        <omgdc:Bounds height="91.0" width="141.0" x="25.0" y="950.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="notificaErroreReperimentoPolicyAOperatoriLogistici" id="BPMNShape_notificaErroreReperimentoPolicyAOperatoriLogistici">
        <omgdc:Bounds height="77.0" width="105.0" x="51.0" y="1120.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="errorendevent1" id="BPMNShape_errorendevent1">
        <omgdc:Bounds height="35.0" width="35.0" x="500.0" y="151.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="errorendevent2" id="BPMNShape_errorendevent2">
        <omgdc:Bounds height="35.0" width="35.0" x="512.0" y="228.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway7" id="BPMNShape_exclusivegateway7">
        <omgdc:Bounds height="40.0" width="40.0" x="790.0" y="200.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="flowRecuperoPolicy" id="BPMNEdge_flowRecuperoPolicy">
        <omgdi:waypoint x="197.0" y="160.0"></omgdi:waypoint>
        <omgdi:waypoint x="317.0" y="135.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowExclusivegatewayRecuperoDatiVeicoliEAutistiPolicy" id="BPMNEdge_flowExclusivegatewayRecuperoDatiVeicoliEAutistiPolicy">
        <omgdi:waypoint x="215.0" y="552.0"></omgdi:waypoint>
        <omgdi:waypoint x="180.0" y="627.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowNotificaErroreReperimentoDatiAutistiEVeicoliAAmministratore" id="BPMNEdge_flowNotificaErroreReperimentoDatiAutistiEVeicoliAAmministratore">
        <omgdi:waypoint x="200.0" y="647.0"></omgdi:waypoint>
        <omgdi:waypoint x="465.0" y="660.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow6" id="BPMNEdge_flow6">
        <omgdi:waypoint x="200.0" y="647.0"></omgdi:waypoint>
        <omgdi:waypoint x="360.0" y="600.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow32" id="BPMNEdge_flow32">
        <omgdi:waypoint x="67.0" y="456.0"></omgdi:waypoint>
        <omgdi:waypoint x="215.0" y="471.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow45" id="BPMNEdge_flow45">
        <omgdi:waypoint x="180.0" y="627.0"></omgdi:waypoint>
        <omgdi:waypoint x="360.0" y="529.0"></omgdi:waypoint>
        <omgdi:waypoint x="580.0" y="441.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow54" id="BPMNEdge_flow54">
        <omgdi:waypoint x="285.0" y="481.0"></omgdi:waypoint>
        <omgdi:waypoint x="580.0" y="441.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow9" id="BPMNEdge_flow9">
        <omgdi:waypoint x="481.0" y="600.0"></omgdi:waypoint>
        <omgdi:waypoint x="512.0" y="580.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow55" id="BPMNEdge_flow55">
        <omgdi:waypoint x="577.0" y="540.0"></omgdi:waypoint>
        <omgdi:waypoint x="580.0" y="441.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow5" id="BPMNEdge_flow5">
        <omgdi:waypoint x="531.0" y="705.0"></omgdi:waypoint>
        <omgdi:waypoint x="590.0" y="685.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow56" id="BPMNEdge_flow56">
        <omgdi:waypoint x="657.0" y="640.0"></omgdi:waypoint>
        <omgdi:waypoint x="658.0" y="507.0"></omgdi:waypoint>
        <omgdi:waypoint x="580.0" y="441.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow63" id="BPMNEdge_flow63">
        <omgdi:waypoint x="600.0" y="421.0"></omgdi:waypoint>
        <omgdi:waypoint x="670.0" y="438.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowExclusivegatewayRecuperoPolicy" id="BPMNEdge_flowExclusivegatewayRecuperoPolicy">
        <omgdi:waypoint x="510.0" y="95.0"></omgdi:waypoint>
        <omgdi:waypoint x="370.0" y="210.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowSollecitoPolicyMancantiAPA" id="BPMNEdge_flowSollecitoPolicyMancantiAPA">
        <omgdi:waypoint x="390.0" y="230.0"></omgdi:waypoint>
        <omgdi:waypoint x="512.0" y="245.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowNotificaErroreReperimentoPolicyAAmministratore" id="BPMNEdge_flowNotificaErroreReperimentoPolicyAAmministratore">
        <omgdi:waypoint x="370.0" y="210.0"></omgdi:waypoint>
        <omgdi:waypoint x="517.0" y="186.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowSubprocessCostruzioneMissione" id="BPMNEdge_flowSubprocessCostruzioneMissione">
        <omgdi:waypoint x="370.0" y="250.0"></omgdi:waypoint>
        <omgdi:waypoint x="375.0" y="371.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow8" id="BPMNEdge_flow8">
        <omgdi:waypoint x="335.0" y="117.0"></omgdi:waypoint>
        <omgdi:waypoint x="510.0" y="95.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowExclusivegatewayRecuperoConsegneERitiri" id="BPMNEdge_flowExclusivegatewayRecuperoConsegneERitiri">
        <omgdi:waypoint x="975.0" y="153.0"></omgdi:waypoint>
        <omgdi:waypoint x="949.0" y="618.0"></omgdi:waypoint>
        <omgdi:waypoint x="1220.0" y="618.0"></omgdi:waypoint>
        <omgdi:waypoint x="1220.0" y="420.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowendSubprocessRecuperoInformazioniDelVeicolo" id="BPMNEdge_flowendSubprocessRecuperoInformazioniDelVeicolo">
        <omgdi:waypoint x="1690.0" y="80.0"></omgdi:waypoint>
        <omgdi:waypoint x="1350.0" y="92.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowSubprocessRecuperoInformazioniDelVeicolo" id="BPMNEdge_flowSubprocessRecuperoInformazioniDelVeicolo">
        <omgdi:waypoint x="1240.0" y="400.0"></omgdi:waypoint>
        <omgdi:waypoint x="1360.0" y="567.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowNotificaErroreReperimentoConsegneERitiriAAmministratore" id="BPMNEdge_flowNotificaErroreReperimentoConsegneERitiriAAmministratore">
        <omgdi:waypoint x="1200.0" y="400.0"></omgdi:waypoint>
        <omgdi:waypoint x="1057.0" y="420.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow1" id="BPMNEdge_flow1">
        <omgdi:waypoint x="1500.0" y="208.0"></omgdi:waypoint>
        <omgdi:waypoint x="1650.0" y="220.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow13" id="BPMNEdge_flow13">
        <omgdi:waypoint x="1220.0" y="380.0"></omgdi:waypoint>
        <omgdi:waypoint x="1330.0" y="112.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow22" id="BPMNEdge_flow22">
        <omgdi:waypoint x="1729.0" y="323.0"></omgdi:waypoint>
        <omgdi:waypoint x="1480.0" y="228.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow23" id="BPMNEdge_flow23">
        <omgdi:waypoint x="1480.0" y="188.0"></omgdi:waypoint>
        <omgdi:waypoint x="1330.0" y="112.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow24" id="BPMNEdge_flow24">
        <omgdi:waypoint x="1650.0" y="220.0"></omgdi:waypoint>
        <omgdi:waypoint x="1755.0" y="123.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow25" id="BPMNEdge_flow25">
        <omgdi:waypoint x="1850.0" y="202.0"></omgdi:waypoint>
        <omgdi:waypoint x="1755.0" y="123.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow26" id="BPMNEdge_flow26">
        <omgdi:waypoint x="1670.0" y="240.0"></omgdi:waypoint>
        <omgdi:waypoint x="1790.0" y="240.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow33" id="BPMNEdge_flow33">
        <omgdi:waypoint x="1102.0" y="169.0"></omgdi:waypoint>
        <omgdi:waypoint x="975.0" y="153.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow53" id="BPMNEdge_flow53">
        <omgdi:waypoint x="1050.0" y="85.0"></omgdi:waypoint>
        <omgdi:waypoint x="1310.0" y="92.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowendNotificaErroreReperimentoConsegneERitiriAAmministratore" id="BPMNEdge_flowendNotificaErroreReperimentoConsegneERitiriAAmministratore">
        <omgdi:waypoint x="1057.0" y="420.0"></omgdi:waypoint>
        <omgdi:waypoint x="1107.0" y="305.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow58" id="BPMNEdge_flow58">
        <omgdi:waypoint x="1107.0" y="228.0"></omgdi:waypoint>
        <omgdi:waypoint x="1330.0" y="112.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow60" id="BPMNEdge_flow60">
        <omgdi:waypoint x="1330.0" y="112.0"></omgdi:waypoint>
        <omgdi:waypoint x="1367.0" y="180.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowExclusivegatewayAggiornamentoMissione" id="BPMNEdge_flowExclusivegatewayAggiornamentoMissione">
        <omgdi:waypoint x="1559.0" y="418.0"></omgdi:waypoint>
        <omgdi:waypoint x="1718.0" y="401.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowNotificaErroreAggiornamentoMissioneAAmministratore" id="BPMNEdge_flowNotificaErroreAggiornamentoMissioneAAmministratore">
        <omgdi:waypoint x="1738.0" y="381.0"></omgdi:waypoint>
        <omgdi:waypoint x="1838.0" y="418.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowendExclusivegatewayAggiornamentoMissione" id="BPMNEdge_flowendExclusivegatewayAggiornamentoMissione">
        <omgdi:waypoint x="1718.0" y="401.0"></omgdi:waypoint>
        <omgdi:waypoint x="1860.0" y="503.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flowSubprocessCostruzioneMissionePerVeicolo" id="BPMNEdge_flowSubprocessCostruzioneMissionePerVeicolo">
        <omgdi:waypoint x="1437.0" y="653.0"></omgdi:waypoint>
        <omgdi:waypoint x="1593.0" y="592.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow35" id="BPMNEdge_flow35">
        <omgdi:waypoint x="1593.0" y="592.0"></omgdi:waypoint>
        <omgdi:waypoint x="1538.0" y="731.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow36" id="BPMNEdge_flow36">
        <omgdi:waypoint x="1538.0" y="731.0"></omgdi:waypoint>
        <omgdi:waypoint x="1745.0" y="702.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow37" id="BPMNEdge_flow37">
        <omgdi:waypoint x="1745.0" y="621.0"></omgdi:waypoint>
        <omgdi:waypoint x="1860.0" y="543.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow38" id="BPMNEdge_flow38">
        <omgdi:waypoint x="1518.0" y="751.0"></omgdi:waypoint>
        <omgdi:waypoint x="1398.0" y="751.0"></omgdi:waypoint>
        <omgdi:waypoint x="1398.0" y="523.0"></omgdi:waypoint>
        <omgdi:waypoint x="1498.0" y="459.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow7" id="BPMNEdge_flow7">
        <omgdi:waypoint x="1907.0" y="464.0"></omgdi:waypoint>
        <omgdi:waypoint x="1986.0" y="511.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow57" id="BPMNEdge_flow57">
        <omgdi:waypoint x="1918.0" y="551.0"></omgdi:waypoint>
        <omgdi:waypoint x="1880.0" y="523.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow62" id="BPMNEdge_flow62">
        <omgdi:waypoint x="1840.0" y="523.0"></omgdi:waypoint>
        <omgdi:waypoint x="1783.0" y="532.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow15" id="BPMNEdge_flow15">
        <omgdi:waypoint x="751.0" y="576.0"></omgdi:waypoint>
        <omgdi:waypoint x="799.0" y="406.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow16" id="BPMNEdge_flow16">
        <omgdi:waypoint x="900.0" y="441.0"></omgdi:waypoint>
        <omgdi:waypoint x="810.0" y="240.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow27" id="BPMNEdge_flow27">
        <omgdi:waypoint x="799.0" y="366.0"></omgdi:waypoint>
        <omgdi:waypoint x="810.0" y="240.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow28" id="BPMNEdge_flow28">
        <omgdi:waypoint x="819.0" y="386.0"></omgdi:waypoint>
        <omgdi:waypoint x="900.0" y="441.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow3" id="BPMNEdge_flow3">
        <omgdi:waypoint x="332.0" y="1031.0"></omgdi:waypoint>
        <omgdi:waypoint x="322.0" y="1120.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow41" id="BPMNEdge_flow41">
        <omgdi:waypoint x="370.0" y="905.0"></omgdi:waypoint>
        <omgdi:waypoint x="332.0" y="940.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow42" id="BPMNEdge_flow42">
        <omgdi:waypoint x="322.0" y="1201.0"></omgdi:waypoint>
        <omgdi:waypoint x="385.0" y="1240.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow2" id="BPMNEdge_flow2">
        <omgdi:waypoint x="95.0" y="1041.0"></omgdi:waypoint>
        <omgdi:waypoint x="103.0" y="1120.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow39" id="BPMNEdge_flow39">
        <omgdi:waypoint x="77.0" y="905.0"></omgdi:waypoint>
        <omgdi:waypoint x="95.0" y="950.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow40" id="BPMNEdge_flow40">
        <omgdi:waypoint x="103.0" y="1197.0"></omgdi:waypoint>
        <omgdi:waypoint x="164.0" y="1280.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow59" id="BPMNEdge_flow59">
        <omgdi:waypoint x="790.0" y="220.0"></omgdi:waypoint>
        <omgdi:waypoint x="677.0" y="221.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>